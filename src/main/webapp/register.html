<!DOCTYPE html>
<html>
<head>
		<meta charset="UTF-8">
		<title>用户注册</title>
		<link rel="stylesheet" type="text/css" href="./css/login.css">
		<script src="./js/jquery.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		<script type="text/javascript" src="./js/jquery.validate.min.js"></script>
		
		<link rel="stylesheet" href="css/bootstrap.min.css">
   		 <link rel="stylesheet" href="layui/css/layui.css">
<!--    <link rel="stylesheet" type="text/css" href="./css/login.css">-->

	<script type="application/javascript" src="js/jquery-3.3.1.js"></script>
    <script type="application/javascript" src="js/bootstrap.min.js"></script>
    <script type="application/javascript" src="layui/layui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
		
	</head>
	
		<body>
	<form method="post" action="./regist.php" onsubmit="return false">
		<div class="regist">
			<div class="regist_center">
				<div class="regist_top">
					<div class="left fl">用户注册</div>
					<div class="right fr">
						<a href="./index.html" target="_self"></a>
					</div>
					<div class="clear"></div>
					<div class="xian center"></div>
				</div>
				<div class="regist_main center">
					<div class="username">
						用&nbsp;&nbsp;户&nbsp;&nbsp;名:&nbsp;&nbsp;<input class="shurukuang"
							type="text" name="username"  />
					</div>
					<div class="username">
						密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:&nbsp;&nbsp;<input
							class="shurukuang" type="password" name="password" id="password"
							 />
					</div>

					<div class="username">
						确认密码:&nbsp;&nbsp;<input class="shurukuang" type="password"
							name="repassword"  />
					</div>
					<div class="username">
						手&nbsp;&nbsp;机&nbsp;&nbsp;号:&nbsp;&nbsp;<input class="shurukuang"
							type="text" name="phone"  />
					</div>
					
				</div> 
				<div class="regist_submit">
					<input class="submit" type="submit" name="submit" value="立即注册">
				</div>

			</div>
		</div>
	</form>


	<script type="text/javascript">
		$("form").submit(function (){

			$.ajax({
				type:"get",
				url:"/yyfood_war_exploded/register.do",
				data:$("form").serialize(),
				dataType:"json",
				success:function (data) {
					if(data.code == 1){

						window.location.href = "login.html";


					}else {
						alert(data.info);
					}

				},
				error:function(){
					alert("ajax请求异常");
				}
			})


		})


	</script>




	<!--<script type="text/javascript">
		jQuery.validator.addMethod("newNameRule", function(value, element) {
				 var length = value.length ;
				 var name = /^([a-zA-Z][a-zA-Z0-9_]+)$/;
				  return this.optional(element) || (name.test(value));
				}, "用户名格式不正确");
		jQuery.validator.addMethod("mobile", function(value, element) {
            var length = value.length;
            return this.optional(element) || (length == 11);
        }, "手机号码格式错误");
		$("form").validate({
			submitHandler:function(){
				$.ajax({
					type:"post",
					url:"/yyfood/register.do",
					data:$("form").serialize(),
					dataType:"json",
					success:function(data){
						if(data.code == 1){
							alert("注册成功");
							window.location.href="login.html";
						}else{
							alert(data.info);
						}
					},
					error:function(data){
						alert(data.info);
					}
				})
			},
			rules:{
				username:{
					required:true,
					newNameRule:true,
					maxlength:11,
					minlength:3,
				},
				password:{
					required:true,
					minlength:3,
					maxlength:15
				},
				repassword:{
					required:true,
					minlength:3,
					maxlength:15,
					equalTo: "#password"
				},
				phone:{
					required:true,
					mobile:true,
				},
				validateCode:"required",
			},
			messages:{
				username:{
					required:"请输入用户名",
					newNameRule:"用户名格式不正确",
					minlength:"用户名不能低于3位",
					maxlength:"用户名不能超过11位",
				},
				password:{
					required:"请输入密码",
					minlength:"密码长度不能低于3位",
					maxlength:"密码长度不能超过15位",
				},
				repassword:{
					required:"请再次输入密码",
					minlength:"密码长度不能低于3位",
					maxlength:"密码长度不能超过15位",
					equalTo:"两次密码不相同",
				},
				phone:{
					required:"请输入手机号",
					mobile:"手机号码格式错误",
				}
				
			}
		})
	</script>-->

		<!--<script type="text/javascript">
	$("form").submit(function () {
		var  username = $('#username').val();
		var  password =$('#password').val();
		var  repassword = $('#password').val();
		var  phone =$('#phone').val();
		if (username == "" || username.length == 0){
			alert("用户名不能为空");

		} else if (password == "" || password.length == 0){
			alert("密码不能为空");
		} else  if (repassword == "" || repassword.length == 0){
			alert("确认密码不能为空");

		}else  if (phone == "" || phone.length == 0){
			alert("手机号不能为空");
		}else {
			$.ajax({
				type:"post",
				url:"/yyfood/register.do",
				data:$("form").serialize(),
				dataType:"json",
				success:function (data) {
					if(data.code == 1){
						window.location.href = "login.html";


					}else {
						alert(data.info);
					}
					
				},
				error:function(){
					alert("ajax请求异常");
			}
			})
		}
	})


		</script>-->

	</body>
</html>